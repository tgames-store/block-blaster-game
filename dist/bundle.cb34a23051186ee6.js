(()=>{null==document.getElementById("blockblaster-canvas")&&(document.body.innerHTML+=`<canvas id="blockblaster-canvas" width=${window.innerWidth} height=${window.innerHeight-30}></canvas>`);var t,i,o,e,n,s,a,r=30,l=document.getElementById("blockblaster-canvas"),h=l.getContext("2d"),c=(setInterval(C,1/r*100),!1),p=0;let f=2;var d,y,u,m,v=[],M=[],x=!1,g=!1,w=!1,z=!1;let b=!0,E=document.getElementById("restart"),S=document.getElementById("continue"),I=document.getElementById("skip"),T=document.querySelector(".watchAdsContainer");function O(){tgames.gameStarted(),a>p&&(p=a),t=!0,i=0,s=1,a=0,n=1500,d=!1,b=!0,u=0,v=[],M=[],y=null,x=!1,g=!1,R()}function R(){clearInterval(o),clearInterval(e),clearInterval(m)}function F(){o=setInterval(j,(s+20)/20*2e3),e=setInterval(N,n)}function B(){h.fillStyle="rgb(40,40,40)",h.fillRect(0,0,l.width,l.height)}function L(){h.fillStyle="#CCFF99",h.font="24px sans-serif",h.fillText("Score: "+a,10,24),h.font="16px sans-serif",h.fillText("High Score: "+p,10,48);for(var t="",o=0;o<i;o++)t+="X";h.font="24px sans-serif",h.fillStyle="#FF6666",h.fillText(t,l.width-75,24),h.font="16px sans-serif",h.fillText("Difficulty: "+s,l.width/2-50,24)}function P(t){for(var i=0;i<l.width;i+=15)for(var o=0;o<l.width;o+=15){var e=Math.floor(60*Math.random());h.fillStyle="rgba("+e+","+e+","+e+","+Math.random()*t+")",h.fillRect(i,o,15,15)}}function k(){h.fillStyle="rgba(0,0,0,"+u+")",h.fillRect(0,0,l.width,l.height),P(u/2),L(),u+=.1/r,h.fillStyle="rgba(255,255,255,"+u+")",h.font="64px sans-serif",h.fillText("GAME OVER",l.width/2-195,l.height/2),tgames.gameOver(a),E.style.display="block",c=!1}function C(){if(B(),v.forEach((function(t){t.render()})),L(),g&&(u-=.1/r,h.fillStyle="rgba(255,255,255,"+u+")",h.fillRect(0,0,l.width,l.height),u<=0&&(g=!1)),w&&(u-=.1/r,h.fillStyle="rgba(255,255,255,"+u+")",h.font="72px sans-serif",h.fillText("+250 POINTS!",l.width/2-220,l.height/2),u<=0&&(w=!1)),z&&(u-=.1/r,h.fillStyle="rgba(255,255,255,"+u+")",h.font="72px sans-serif",h.fillText("TRIPLE SHOT!",l.width/2-220,l.height/2),u<=0&&(z=!1)),d)b?(i=0,h.fillStyle="rgba(0,0,0,"+u+")",h.fillRect(0,0,l.width,l.height),P(u/2),L(),u+=.1/r,h.fillStyle="rgba(255,255,255,"+u+")",h.font="32px sans-serif",h.fillText("Continue by watch ads?",l.width/2-170,l.height/2),setInterval(H,8e3),T.style.display="flex"):k();else{if(t)return B(),L(),u+=.1/r,h.fillStyle="rgba(255,255,255,"+u+")",h.font="72px sans-serif",h.fillText("READY?",l.width/2-140,l.height/2),h.fillStyle="rgba(255,255,255,0.5)",h.font="32px sans-serif",h.fillText("You have only 3 lives",l.width/2-150,60+l.height/2),void L();v.forEach((function(t){t.position.y>l.height+20&&("Enemy"==t.name&&(i+=1),$(t)),t.update(1/r)})),M.forEach((function(t){var i=v.indexOf(t);i>-1&&v.splice(i,1)})),i>=3&&(R(),d=!0,u=0)}}function D(t,i){var o=new _;o.position.set(y.position.x+y.size/2-o.size/2+t.x,y.position.y+y.size/2-o.size/2+t.y),o.velocity.y=-i,v.push(o)}function H(){c||(T.style.display="none",b=!1,k())}function j(){n>20&&(n-=20),(s+=1)%5==0&&Math.random()>.5&&function(){var t=new tt,i=Math.floor(Math.random()*l.width),o=-t.size,e=Math.random()*s+s/2,n=Math.floor(Math.random()*(e+15)+e)/2,a=Math.floor(Math.random()*(e+15)+e)/2;t.position.set(i,o);var r=Math.random();r>.5?U(t,e):r>.3?W(t,n,a,e):r>.1?q(t,n,a,e):X(t,n,a,e),v.push(t)}(),clearInterval(e),e=setInterval(N,n)}function A(t,i){if(-1==t.indexOf("a"))return t.replace(")",","+i+")").replace("rgb","rgba")}function Y(t){if("Enemy"==t.name){for(var i=Math.floor(6*Math.random()+3),o=0;o<i;o++){(s=new Z).color=t.color,s.size=Math.floor(Math.random()*t.size/2+5);var e=Math.random()*t.size/2,n=Math.random()*t.size/2;s.position.x=t.position.x+e,s.position.y=t.position.y+n,v.push(s)}a+=25}else if("PowerUp"==t.name){for(i=Math.floor(6*Math.random()+3),o=0;o<i;o++){var s;(s=new Z).color=G(100,255),s.size=Math.floor(Math.random()*t.size/2+5),e=Math.random()*t.size/2,n=Math.random()*t.size/2,s.position.x=t.position.x+e,s.position.y=t.position.y+n,v.push(s)}"scoreBoost"==(r=t.effect)?(console.log("+250"),u=1,w=!0,a+=250):"tripleShot"==r?(console.log("TRIPLE SHOT"),u=1,x=!0,z=!0,m=setInterval((function(){x=!1,clearInterval(m)}),1e4)):"bomb"==r&&(console.log("BOMB"),g=!0,u=1,v.forEach((function(t){"Enemy"==t.name&&Y(t)})))}var r;$(t)}function $(t){M.push(t)}function N(){var t=new K,i=Math.floor(Math.random()*l.width),o=-t.size,e=Math.random()*s+s/2,n=Math.floor(Math.random()*(e+15)+e),a=Math.floor(Math.random()*(e+15)+e);t.position.set(i,o);var r=Math.random();r>.5?U(t,e):r>.3?W(t,n,a,e):r>.1?q(t,n,a,e):X(t,n,a,e),v.push(t)}function U(t,i){t.update=function(t){this.velocity.x=0,this.velocity.y=i,J.prototype.update.call(this,t)}}function W(t,i,o,e){t.update=function(t){this.velocity.x=i*Math.cos(this.position.y/o),this.velocity.y=e,J.prototype.update.call(this,t)}}function X(t,i,o,e){var n=1;Math.random()>.5&&(n=-1),t.update=function(t){this.velocity.x=n*(-2*i/Math.PI)*Math.atan(1/Math.tan(this.position.y/o)),this.velocity.y=e,J.prototype.update.call(this,t)}}function q(t,i,o,e){t.update=function(t){this.velocity.x=2*i/Math.PI*Math.asin(Math.sin(this.position.y/o)),this.velocity.y=e,J.prototype.update.call(this,t)}}function G(t,i){return"rgb("+Math.floor(Math.random()*i+t)+","+Math.floor(Math.random()*i+t)+","+Math.floor(Math.random()*i+t)+")"}var V=function(t,i){this.x=t,this.y=i};V.prototype.set=function(t,i){this.x=t,this.y=i};var J=function(){this.name="Entity",this.size=25,this.position=new V(0,0),this.velocity=new V(0,0),this.color="#FFFFFF"};J.prototype.sayName=function(){console.log(this.name)},J.prototype.update=function(t){this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.position.x<0&&(this.position.x=this.size),this.position.x+this.size>l.width&&(this.position.x=l.width-this.size)},J.prototype.render=function(){h.fillStyle=this.color,h.fillRect(this.position.x,this.position.y,this.size,this.size)};var K=function(){J.call(this),this.name="Enemy",this.size=Math.floor(50*Math.random()+20),this.color=G(90,150)};K.prototype=Object.create(J.prototype),K.prototype.constructor=J;var Q=function(){J.call(this),this.name="Player",this.color="#4747FF"};(Q.prototype=Object.create(J.prototype)).constructor=J;var Z=function(){J.call(this),this.name="Particle",this.size=10,this.time=0,this.maxTime=Math.floor(10*Math.random()+3),this.velocity.x=Math.floor(20*Math.random()-10),this.velocity.y=Math.floor(20*Math.random()-10)};Z.prototype=Object.create(J.prototype),Z.prototype.constructor=J,Z.prototype.update=function(t){J.prototype.update.call(this,t),this.time+=t,this.time>=this.maxTime&&$(this)};var _=function(){J.call(this),this.name="Bullet",this.size=10,this.time=0,this.color="rgba(200,200,200,1)",this.particlesDelay=.7};_.prototype=Object.create(J.prototype),_.prototype.constructor=J,_.prototype.update=function(t){J.prototype.update.call(this,t);var i=this;if(v.forEach((function(t){var o,e,n,s,a,r,l,h,c,p,f,d;t!==i&&"Particle"!=t.name&&(e=t,n=(o=i).size,s=o.position.x,a=o.position.x+n,r=o.position.y,l=o.position.y+n,h=e.size,c=e.position.x,p=e.position.x+h,f=e.position.y,d=e.position.y+h,s<p&&a>c&&r<d&&l>f&&(Y(t),$(i)))})),this.position.y<0&&$(this),this.time+=t,this.time>=this.particlesDelay){this.time=0;var o=new Z;o.size=Math.floor(5*Math.random()+2),o.color=A("rgb(125,125,125)",Math.random()),o.velocity.x/=2,o.position.x=this.position.x+this.size/2-o.size/2,o.position.y=this.position.y-o.size/2,v.push(o)}};var tt=function(){J.call(this),this.name="PowerUp",this.size=20,this.time=0,this.particlesDelay=.25;var t=Math.random();this.effect=t<.5?"scoreBoost":t<.75?"tripleShot":"bomb"};tt.prototype=Object.create(J.prototype),tt.prototype.constructor=J,tt.prototype.update=function(t){if(J.prototype.update.call(this,t),(this.position.y<0||this.position.y+this.size>l.height)&&$(this),this.time+=t,this.time>=this.particlesDelay){this.time=0;var i=new Z;i.size=Math.floor(5*Math.random()+2),i.color=A(G(100,255),Math.random()),i.velocity.x/=2,i.position.x=this.position.x+this.size/2-i.size/2,i.position.y=this.position.y-i.size/2,v.push(i)}},tt.prototype.render=function(){h.fillStyle=G(100,255),h.fillRect(this.position.x,this.position.y,this.size,this.size)},document.addEventListener("DOMContentLoaded",O()),l.addEventListener("click",(function(){if(t)return tgames.gameStarted(),console.log("start"),t=!1,R(),F(),(y=new Q).position.set(l.width/2,l.height-y.size),y.render(),void v.push(y);D({x:0,y:-y.size},30),x&&(D({x:-y.size,y:-y.size},25),D({x:y.size,y:-y.size},25)),a>0&&(a-=1)})),window.addEventListener("resize",(function(){h.canvas.width=window.innerWidth,h.canvas.height=window.innerHeight-30,C()})),E.addEventListener("click",(()=>{0===f||f<0?(tgames.showRewardedAd(),f=3):f--,O(),E.style.display="none"})),S.addEventListener("click",(async()=>{c=!0;try{await tgames.showRewardedAd()}catch(t){console.log(`we got error with ads: ${t}`)}f--,T.style.display="none",d=!1,i=0,F(),C()})),I.addEventListener("click",(async()=>{c=!0,T.style.display="none",b=!1,k()})),l.addEventListener("mousemove",(function(t){var i=function(t,i){var o=t.getBoundingClientRect();return new V(i.clientX-o.left,i.clientY-o.top)}(l,t);y&&!d&&(y.position.x=i.x)}),!1)})();
//# sourceMappingURL=bundle.cb34a23051186ee6.js.map