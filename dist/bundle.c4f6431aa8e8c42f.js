(()=>{null==document.getElementById("blockblaster-canvas")&&(document.body.innerHTML+='<canvas id="blockblaster-canvas" width="800" height="600"></canvas>');var t,i,o,e,n,s,a,r,h,l,c,p=30,f=document.getElementById("blockblaster-canvas"),y=f.getContext("2d"),d=(setInterval((function(){return b(),u.forEach((function(t){t.render()})),E(),M&&(l-=.1/p,y.fillStyle="rgba(255,255,255,"+l+")",y.fillRect(0,0,f.width,f.height),l<=0&&(M=!1)),x&&(l-=.1/p,y.fillStyle="rgba(255,255,255,"+l+")",y.font="72px sans-serif",y.fillText("+250 POINTS!",f.width/2-220,f.height/2),l<=0&&(x=!1)),z&&(l-=.1/p,y.fillStyle="rgba(255,255,255,"+l+")",y.font="72px sans-serif",y.fillText("TRIPLE SHOT!",f.width/2-220,f.height/2),l<=0&&(z=!1)),r?(y.fillStyle="rgba(0,0,0,"+l+")",y.fillRect(0,0,f.width,f.height),function(t){for(var i=0;i<f.width;i+=15)for(var o=0;o<f.width;o+=15){var e=Math.floor(60*Math.random());y.fillStyle="rgba("+e+","+e+","+e+","+Math.random()*t+")",y.fillRect(i,o,15,15)}}(l/2),E(),l+=.1/p,y.fillStyle="rgba(255,255,255,"+l+")",y.font="72px sans-serif",void y.fillText("GAME OVER",f.width/2-220,f.height/2)):t?(b(),E(),l+=.1/p,y.fillStyle="rgba(255,255,255,"+l+")",y.font="72px sans-serif",y.fillText("READY?",f.width/2-140,f.height/2),void E()):(u.forEach((function(t){t.position.y>f.height+20&&("Enemy"==t.name&&(i+=1),B(t)),t.update(1/p)})),m.forEach((function(t){var i=u.indexOf(t);i>-1&&u.splice(i,1)})),void(i>=3&&(w(),r=!0,l=0)))}),1/p*100),0),u=[],m=[],v=!1,M=!1,x=!1,z=!1;function g(){a>d&&(d=a),t=!0,i=0,s=1,a=0,n=1500,r=!1,l=0,u=[],m=[],h=null,v=!1,M=!1,w()}function w(){clearInterval(o),clearInterval(e),clearInterval(c)}function b(){y.fillStyle="rgb(40,40,40)",y.fillRect(0,0,f.width,f.height)}function E(){y.fillStyle="#CCFF99",y.font="24px sans-serif",y.fillText("Score: "+a,10,24),y.font="16px sans-serif",y.fillText("High Score: "+d,10,48);for(var t="",o=0;o<i;o++)t+="X";y.font="24px sans-serif",y.fillStyle="#FF6666",y.fillText(t,f.width-75,24),y.font="16px sans-serif",y.fillText("Difficulty: "+s,f.width/2-50,24)}function I(t,i){var o=new U;o.position.set(h.position.x+h.size/2-o.size/2+t.x,h.position.y+h.size/2-o.size/2+t.y),o.velocity.y=-i,u.push(o)}function S(){n>20&&(n-=20),(s+=1)%5==0&&Math.random()>.5&&function(){var t=new X,i=Math.floor(Math.random()*f.width),o=-t.size,e=Math.random()*s+s/2,n=Math.floor(Math.random()*(e+15)+e)/2,a=Math.floor(Math.random()*(e+15)+e)/2;t.position.set(i,o);var r=Math.random();r>.5?R(t,e):r>.3?P(t,n,a,e):r>.1?L(t,n,a,e):D(t,n,a,e),u.push(t)}(),clearInterval(e),e=setInterval(F,n)}function T(t,i){if(-1==t.indexOf("a"))return t.replace(")",","+i+")").replace("rgb","rgba")}function O(t){if("Enemy"==t.name){for(var i=Math.floor(6*Math.random()+3),o=0;o<i;o++){(s=new N).color=t.color,s.size=Math.floor(Math.random()*t.size/2+5);var e=Math.random()*t.size/2,n=Math.random()*t.size/2;s.position.x=t.position.x+e,s.position.y=t.position.y+n,u.push(s)}a+=25}else if("PowerUp"==t.name){for(i=Math.floor(6*Math.random()+3),o=0;o<i;o++){var s;(s=new N).color=k(100,255),s.size=Math.floor(Math.random()*t.size/2+5),e=Math.random()*t.size/2,n=Math.random()*t.size/2,s.position.x=t.position.x+e,s.position.y=t.position.y+n,u.push(s)}"scoreBoost"==(r=t.effect)?(console.log("+250"),l=1,x=!0,a+=250):"tripleShot"==r?(console.log("TRIPLE SHOT"),l=1,v=!0,z=!0,c=setInterval((function(){v=!1,clearInterval(c)}),1e4)):"bomb"==r&&(console.log("BOMB"),M=!0,l=1,u.forEach((function(t){"Enemy"==t.name&&O(t)})))}var r;B(t)}function B(t){m.push(t)}function F(){var t=new H,i=Math.floor(Math.random()*f.width),o=-t.size,e=Math.random()*s+s/2,n=Math.floor(Math.random()*(e+15)+e),a=Math.floor(Math.random()*(e+15)+e);t.position.set(i,o);var r=Math.random();r>.5?R(t,e):r>.3?P(t,n,a,e):r>.1?L(t,n,a,e):D(t,n,a,e),u.push(t)}function R(t,i){t.update=function(t){this.velocity.x=0,this.velocity.y=i,C.prototype.update.call(this,t)}}function P(t,i,o,e){t.update=function(t){this.velocity.x=i*Math.cos(this.position.y/o),this.velocity.y=e,C.prototype.update.call(this,t)}}function D(t,i,o,e){var n=1;Math.random()>.5&&(n=-1),t.update=function(t){this.velocity.x=n*(-2*i/Math.PI)*Math.atan(1/Math.tan(this.position.y/o)),this.velocity.y=e,C.prototype.update.call(this,t)}}function L(t,i,o,e){t.update=function(t){this.velocity.x=2*i/Math.PI*Math.asin(Math.sin(this.position.y/o)),this.velocity.y=e,C.prototype.update.call(this,t)}}function k(t,i){return"rgb("+Math.floor(Math.random()*i+t)+","+Math.floor(Math.random()*i+t)+","+Math.floor(Math.random()*i+t)+")"}var j=function(t,i){this.x=t,this.y=i};j.prototype.set=function(t,i){this.x=t,this.y=i};var C=function(){this.name="Entity",this.size=25,this.position=new j(0,0),this.velocity=new j(0,0),this.color="#FFFFFF"};C.prototype.sayName=function(){console.log(this.name)},C.prototype.update=function(t){this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.position.x<0&&(this.position.x=this.size),this.position.x+this.size>f.width&&(this.position.x=f.width-this.size)},C.prototype.render=function(){y.fillStyle=this.color,y.fillRect(this.position.x,this.position.y,this.size,this.size)};var H=function(){C.call(this),this.name="Enemy",this.size=Math.floor(50*Math.random()+20),this.color=k(90,150)};H.prototype=Object.create(C.prototype),H.prototype.constructor=C;var A=function(){C.call(this),this.name="Player",this.color="#4747FF"};A.prototype=Object.create(C.prototype),A.prototype.constructor=C;var N=function(){C.call(this),this.name="Particle",this.size=10,this.time=0,this.maxTime=Math.floor(10*Math.random()+3),this.velocity.x=Math.floor(20*Math.random()-10),this.velocity.y=Math.floor(20*Math.random()-10)};N.prototype=Object.create(C.prototype),N.prototype.constructor=C,N.prototype.update=function(t){C.prototype.update.call(this,t),this.time+=t,this.time>=this.maxTime&&B(this)};var U=function(){C.call(this),this.name="Bullet",this.size=10,this.time=0,this.color="rgba(200,200,200,1)",this.particlesDelay=.7};U.prototype=Object.create(C.prototype),U.prototype.constructor=C,U.prototype.update=function(t){C.prototype.update.call(this,t);var i=this;if(u.forEach((function(t){var o,e,n,s,a,r,h,l,c,p,f,y;t!==i&&"Particle"!=t.name&&(e=t,n=(o=i).size,s=o.position.x,a=o.position.x+n,r=o.position.y,h=o.position.y+n,l=e.size,c=e.position.x,p=e.position.x+l,f=e.position.y,y=e.position.y+l,s<p&&a>c&&r<y&&h>f&&(O(t),B(i)))})),this.position.y<0&&B(this),this.time+=t,this.time>=this.particlesDelay){this.time=0;var o=new N;o.size=Math.floor(5*Math.random()+2),o.color=T("rgb(125,125,125)",Math.random()),o.velocity.x/=2,o.position.x=this.position.x+this.size/2-o.size/2,o.position.y=this.position.y-o.size/2,u.push(o)}};var X=function(){C.call(this),this.name="PowerUp",this.size=20,this.time=0,this.particlesDelay=.25;var t=Math.random();this.effect=t<.5?"scoreBoost":t<.75?"tripleShot":"bomb"};X.prototype=Object.create(C.prototype),X.prototype.constructor=C,X.prototype.update=function(t){if(C.prototype.update.call(this,t),(this.position.y<0||this.position.y+this.size>f.height)&&B(this),this.time+=t,this.time>=this.particlesDelay){this.time=0;var i=new N;i.size=Math.floor(5*Math.random()+2),i.color=T(k(100,255),Math.random()),i.velocity.x/=2,i.position.x=this.position.x+this.size/2-i.size/2,i.position.y=this.position.y-i.size/2,u.push(i)}},X.prototype.render=function(){y.fillStyle=k(100,255),y.fillRect(this.position.x,this.position.y,this.size,this.size)},document.addEventListener("DOMContentLoaded",g()),document.getElementById("closeButton").onclick=function(){self.close()},document.getElementById("minimizeButton").onclick=function(){minimize()},f.addEventListener("click",(function(){r?l>.5&&g():t?(t=!1,w(),o=setInterval(S,2e3),e=setInterval(F,n),(h=new A).position.set(f.width/2,f.height-h.size),h.render(),u.push(h)):(I({x:0,y:-h.size},30),v&&(I({x:-h.size,y:-h.size},25),I({x:h.size,y:-h.size},25)),a>0&&(a-=1))})),f.addEventListener("mousemove",(function(t){var i=function(t,i){var o=t.getBoundingClientRect();return new j(i.clientX-o.left,i.clientY-o.top)}(f,t);h&&!r&&(h.position.x=i.x)}),!1)})();
//# sourceMappingURL=bundle.c4f6431aa8e8c42f.js.map