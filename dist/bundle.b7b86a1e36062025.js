(()=>{null==document.getElementById("blockblaster-canvas")&&(document.body.innerHTML+=`<canvas id="blockblaster-canvas" width=${window.innerWidth} height=${window.innerHeight-30}></canvas>`);var t,i,o,e,n,s,a,r=30,l=document.getElementById("blockblaster-canvas"),h=l.getContext("2d"),c=(setInterval(D,1/r*100),null),p=!1,f=0;let d=2;var y,u,m,v,M=[],x=[],g=!1,w=!1,z=!1,b=!1;let E=!0,S=document.getElementById("restart"),T=document.getElementById("continue"),I=document.getElementById("skip"),O=document.querySelector(".watchAdsContainer");function R(o){"init"===!o&&tgames.gameStarted(),a>f&&(f=a),t=!0,i=0,s=50,a=0,n=1500,y=!1,E=!0,m=0,M=[],x=[],u=null,g=!1,w=!1,F()}function F(){clearInterval(o),clearInterval(e),clearInterval(v)}function B(){o=setInterval(A,(s+20)/20*2e3),e=setInterval(U,n)}function L(){h.fillStyle="rgb(40,40,40)",h.fillRect(0,0,l.width,l.height)}function P(){h.fillStyle="#CCFF99",h.font="24px sans-serif",h.fillText("Score: "+a,10,24),h.font="16px sans-serif",h.fillText("High Score: "+f,10,48);for(var t="",o=0;o<i;o++)t+="X";h.font="24px sans-serif",h.fillStyle="#FF6666",h.fillText(t,l.width-75,24),h.font="16px sans-serif",h.fillText("Difficulty: "+s,l.width/2-50,24)}function k(t){for(var i=0;i<l.width;i+=15)for(var o=0;o<l.width;o+=15){var e=Math.floor(60*Math.random());h.fillStyle="rgba("+e+","+e+","+e+","+Math.random()*t+")",h.fillRect(i,o,15,15)}}function C(){h.fillStyle="rgba(0,0,0,"+m+")",h.fillRect(0,0,l.width,l.height),k(m/2),P(),m+=.1/r,h.fillStyle="rgba(255,255,255,"+m+")",h.font="64px sans-serif",h.fillText("GAME OVER",l.width/2-195,l.height/2),tgames.gameOver(a),S.style.display="block",p=!1}function D(){if(L(),M.forEach((function(t){t.render()})),P(),w&&(m-=.1/r,h.fillStyle="rgba(255,255,255,"+m+")",h.fillRect(0,0,l.width,l.height),m<=0&&(w=!1)),z&&(m-=.1/r,h.fillStyle="rgba(255,255,255,"+m+")",h.font="72px sans-serif",h.fillText("+250 POINTS!",l.width/2-220,l.height/2),m<=0&&(z=!1)),b&&(m-=.1/r,h.fillStyle="rgba(255,255,255,"+m+")",h.font="72px sans-serif",h.fillText("TRIPLE SHOT!",l.width/2-220,l.height/2),m<=0&&(b=!1)),y)E?(i=0,h.fillStyle="rgba(0,0,0,"+m+")",h.fillRect(0,0,l.width,l.height),k(m/2),P(),m+=.1/r,h.fillStyle="rgba(255,255,255,"+m+")",h.font="32px sans-serif",h.fillText("Continue by watch ads?",l.width/2-170,l.height/2),c||(c=setTimeout(j,8e3)),O.style.display="flex"):C();else{if(t)return L(),P(),m+=.1/r,h.fillStyle="rgba(255,255,255,"+m+")",h.font="72px sans-serif",h.fillText("READY?",l.width/2-140,l.height/2),h.fillStyle="rgba(255,255,255,0.5)",h.font="32px sans-serif",h.fillText("You have only 3 lives",l.width/2-150,60+l.height/2),void P();M.forEach((function(t){t.position.y>l.height+20&&("Enemy"==t.name&&(i+=1),N(t)),t.update(1/r)})),x.forEach((function(t){var i=M.indexOf(t);i>-1&&M.splice(i,1)})),i>=3&&(F(),y=!0,m=0)}}function H(t,i){var o=new tt;o.position.set(u.position.x+u.size/2-o.size/2+t.x,u.position.y+u.size/2-o.size/2+t.y),o.velocity.y=-i,M.push(o)}function j(){clearTimeout(c),c=null,p||(O.style.display="none",E=!1,C())}function A(){n>20&&(n-=20),(s+=1)%5==0&&Math.random()>.5&&function(){var t=new it,i=Math.floor(Math.random()*l.width),o=-t.size,e=Math.random()*s+s/2,n=Math.floor(Math.random()*(e+15)+e)/2,a=Math.floor(Math.random()*(e+15)+e)/2;t.position.set(i,o);var r=Math.random();r>.5?W(t,e):r>.3?X(t,n,a,e):r>.1?G(t,n,a,e):q(t,n,a,e),M.push(t)}(),clearInterval(e),e=setInterval(U,n)}function Y(t,i){if(-1==t.indexOf("a"))return t.replace(")",","+i+")").replace("rgb","rgba")}function $(t){if("Enemy"==t.name){for(var i=Math.floor(6*Math.random()+3),o=0;o<i;o++){(s=new _).color=t.color,s.size=Math.floor(Math.random()*t.size/2+5);var e=Math.random()*t.size/2,n=Math.random()*t.size/2;s.position.x=t.position.x+e,s.position.y=t.position.y+n,M.push(s)}a+=25}else if("PowerUp"==t.name){for(i=Math.floor(6*Math.random()+3),o=0;o<i;o++){var s;(s=new _).color=V(100,255),s.size=Math.floor(Math.random()*t.size/2+5),e=Math.random()*t.size/2,n=Math.random()*t.size/2,s.position.x=t.position.x+e,s.position.y=t.position.y+n,M.push(s)}"scoreBoost"==(r=t.effect)?(console.log("+250"),m=1,z=!0,a+=250):"tripleShot"==r?(console.log("TRIPLE SHOT"),m=1,g=!0,b=!0,v=setInterval((function(){g=!1,clearInterval(v)}),1e4)):"bomb"==r&&(console.log("BOMB"),w=!0,m=1,M.forEach((function(t){"Enemy"==t.name&&$(t)})))}var r;N(t)}function N(t){x.push(t)}function U(){var t=new Q,i=Math.floor(Math.random()*l.width),o=-t.size,e=Math.random()*s+s/2,n=Math.floor(Math.random()*(e+15)+e),a=Math.floor(Math.random()*(e+15)+e);t.position.set(i,o);var r=Math.random();r>.5?W(t,e):r>.3?X(t,n,a,e):r>.1?G(t,n,a,e):q(t,n,a,e),M.push(t)}function W(t,i){t.update=function(t){this.velocity.x=0,this.velocity.y=i,K.prototype.update.call(this,t)}}function X(t,i,o,e){t.update=function(t){this.velocity.x=i*Math.cos(this.position.y/o),this.velocity.y=e,K.prototype.update.call(this,t)}}function q(t,i,o,e){var n=1;Math.random()>.5&&(n=-1),t.update=function(t){this.velocity.x=n*(-2*i/Math.PI)*Math.atan(1/Math.tan(this.position.y/o)),this.velocity.y=e,K.prototype.update.call(this,t)}}function G(t,i,o,e){t.update=function(t){this.velocity.x=2*i/Math.PI*Math.asin(Math.sin(this.position.y/o)),this.velocity.y=e,K.prototype.update.call(this,t)}}function V(t,i){return"rgb("+Math.floor(Math.random()*i+t)+","+Math.floor(Math.random()*i+t)+","+Math.floor(Math.random()*i+t)+")"}var J=function(t,i){this.x=t,this.y=i};J.prototype.set=function(t,i){this.x=t,this.y=i};var K=function(){this.name="Entity",this.size=25,this.position=new J(0,0),this.velocity=new J(0,0),this.color="#FFFFFF"};K.prototype.sayName=function(){console.log(this.name)},K.prototype.update=function(t){this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.position.x<0&&(this.position.x=this.size),this.position.x+this.size>l.width&&(this.position.x=l.width-this.size)},K.prototype.render=function(){h.fillStyle=this.color,h.fillRect(this.position.x,this.position.y,this.size,this.size)};var Q=function(){K.call(this),this.name="Enemy",this.size=Math.floor(50*Math.random()+20),this.color=V(90,150)};Q.prototype=Object.create(K.prototype),Q.prototype.constructor=K;var Z=function(){K.call(this),this.name="Player",this.color="#4747FF"};(Z.prototype=Object.create(K.prototype)).constructor=K;var _=function(){K.call(this),this.name="Particle",this.size=10,this.time=0,this.maxTime=Math.floor(10*Math.random()+3),this.velocity.x=Math.floor(20*Math.random()-10),this.velocity.y=Math.floor(20*Math.random()-10)};_.prototype=Object.create(K.prototype),_.prototype.constructor=K,_.prototype.update=function(t){K.prototype.update.call(this,t),this.time+=t,this.time>=this.maxTime&&N(this)};var tt=function(){K.call(this),this.name="Bullet",this.size=10,this.time=0,this.color="rgba(200,200,200,1)",this.particlesDelay=.7};tt.prototype=Object.create(K.prototype),tt.prototype.constructor=K,tt.prototype.update=function(t){K.prototype.update.call(this,t);var i=this;if(M.forEach((function(t){var o,e,n,s,a,r,l,h,c,p,f,d;t!==i&&"Particle"!=t.name&&(e=t,n=(o=i).size,s=o.position.x,a=o.position.x+n,r=o.position.y,l=o.position.y+n,h=e.size,c=e.position.x,p=e.position.x+h,f=e.position.y,d=e.position.y+h,s<p&&a>c&&r<d&&l>f&&($(t),N(i)))})),this.position.y<0&&N(this),this.time+=t,this.time>=this.particlesDelay){this.time=0;var o=new _;o.size=Math.floor(5*Math.random()+2),o.color=Y("rgb(125,125,125)",Math.random()),o.velocity.x/=2,o.position.x=this.position.x+this.size/2-o.size/2,o.position.y=this.position.y-o.size/2,M.push(o)}};var it=function(){K.call(this),this.name="PowerUp",this.size=20,this.time=0,this.particlesDelay=.25;var t=Math.random();this.effect=t<.5?"scoreBoost":t<.75?"tripleShot":"bomb"};it.prototype=Object.create(K.prototype),it.prototype.constructor=K,it.prototype.update=function(t){if(K.prototype.update.call(this,t),(this.position.y<0||this.position.y+this.size>l.height)&&N(this),this.time+=t,this.time>=this.particlesDelay){this.time=0;var i=new _;i.size=Math.floor(5*Math.random()+2),i.color=Y(V(100,255),Math.random()),i.velocity.x/=2,i.position.x=this.position.x+this.size/2-i.size/2,i.position.y=this.position.y-i.size/2,M.push(i)}},it.prototype.render=function(){h.fillStyle=V(100,255),h.fillRect(this.position.x,this.position.y,this.size,this.size)},document.addEventListener("DOMContentLoaded",R("init")),l.addEventListener("click",(function(){if(t)return tgames.gameStarted(),t=!1,F(),B(),(u=new Z).position.set(l.width/2,l.height-u.size),u.render(),void M.push(u);H({x:0,y:-u.size},30),g&&(H({x:-u.size,y:-u.size},25),H({x:u.size,y:-u.size},25)),a>0&&(a-=1)})),window.addEventListener("resize",(function(){h.canvas.width=window.innerWidth,h.canvas.height=window.innerHeight-30,D()})),S.addEventListener("click",(()=>{0===d||d<0?(tgames.showRewardedAd(),d=3):d--,R("game"),S.style.display="none"})),T.addEventListener("click",(async()=>{p=!0;try{await tgames.showRewardedAd()}catch(t){console.log(`we got error with ads: ${t}`)}d--,O.style.display="none",y=!1,i=0,B(),D()})),I.addEventListener("click",(async()=>{p=!0,O.style.display="none",clearTimeout(c),E=!1,C()})),l.addEventListener("mousemove",(function(t){var i=function(t,i){var o=t.getBoundingClientRect();return new J(i.clientX-o.left,i.clientY-o.top)}(l,t);u&&!y&&(u.position.x=i.x)}),!1)})();
//# sourceMappingURL=bundle.b7b86a1e36062025.js.map