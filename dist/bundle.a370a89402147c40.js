(()=>{null==document.getElementById("blockblaster-canvas")&&(document.body.innerHTML+=`<canvas id="blockblaster-canvas" width=${window.innerWidth} height=${window.innerHeight-30}></canvas>`);var t,i,o,e,n,s,a,r=30,h=document.getElementById("blockblaster-canvas"),l=h.getContext("2d"),c=(setInterval(k,1/r*100),0);let p=2;var f,d,y,u,m=[],v=[],M=!1,x=!1,g=!1,w=!1;let z=!0,b=document.getElementById("restart"),E=document.getElementById("continue"),S=document.getElementById("skip"),I=document.querySelector(".watchAdsContainer");function T(){tgames.gameStarted(),a>c&&(c=a),t=!0,i=0,s=1,a=0,n=1500,f=!1,z=!0,y=0,m=[],v=[],d=null,M=!1,x=!1,O()}function O(){clearInterval(o),clearInterval(e),clearInterval(u)}function R(){o=setInterval(D,(s+20)/20*2e3),e=setInterval(Y,n)}function F(){l.fillStyle="rgb(40,40,40)",l.fillRect(0,0,h.width,h.height)}function B(){l.fillStyle="#CCFF99",l.font="24px sans-serif",l.fillText("Score: "+a,10,24),l.font="16px sans-serif",l.fillText("High Score: "+c,10,48);for(var t="",o=0;o<i;o++)t+="X";l.font="24px sans-serif",l.fillStyle="#FF6666",l.fillText(t,h.width-75,24),l.font="16px sans-serif",l.fillText("Difficulty: "+s,h.width/2-50,24)}function L(t){for(var i=0;i<h.width;i+=15)for(var o=0;o<h.width;o+=15){var e=Math.floor(60*Math.random());l.fillStyle="rgba("+e+","+e+","+e+","+Math.random()*t+")",l.fillRect(i,o,15,15)}}function P(){l.fillStyle="rgba(0,0,0,"+y+")",l.fillRect(0,0,h.width,h.height),L(y/2),B(),y+=.1/r,l.fillStyle="rgba(255,255,255,"+y+")",l.font="64px sans-serif",l.fillText("GAME OVER",h.width/2-195,h.height/2),tgames.gameOver(a),b.style.display="block"}function k(){if(F(),m.forEach((function(t){t.render()})),B(),x&&(y-=.1/r,l.fillStyle="rgba(255,255,255,"+y+")",l.fillRect(0,0,h.width,h.height),y<=0&&(x=!1)),g&&(y-=.1/r,l.fillStyle="rgba(255,255,255,"+y+")",l.font="72px sans-serif",l.fillText("+250 POINTS!",h.width/2-220,h.height/2),y<=0&&(g=!1)),w&&(y-=.1/r,l.fillStyle="rgba(255,255,255,"+y+")",l.font="72px sans-serif",l.fillText("TRIPLE SHOT!",h.width/2-220,h.height/2),y<=0&&(w=!1)),f)z?(i=0,l.fillStyle="rgba(0,0,0,"+y+")",l.fillRect(0,0,h.width,h.height),L(y/2),B(),y+=.1/r,l.fillStyle="rgba(255,255,255,"+y+")",l.font="32px sans-serif",l.fillText("Continue by watch ads?",h.width/2-170,h.height/2),setTimeout((()=>{I.style.display="none",z=!1,P()}),4e3),I.style.display="flex"):P();else{if(t)return F(),B(),y+=.1/r,l.fillStyle="rgba(255,255,255,"+y+")",l.font="72px sans-serif",l.fillText("READY?",h.width/2-140,h.height/2),l.fillStyle="rgba(255,255,255,0.5)",l.font="32px sans-serif",l.fillText("You have only 3 lives",h.width/2-150,60+h.height/2),void B();m.forEach((function(t){t.position.y>h.height+20&&("Enemy"==t.name&&(i+=1),A(t)),t.update(1/r)})),v.forEach((function(t){var i=m.indexOf(t);i>-1&&m.splice(i,1)})),i>=3&&(O(),f=!0,y=0)}}function C(t,i){var o=new Q;o.position.set(d.position.x+d.size/2-o.size/2+t.x,d.position.y+d.size/2-o.size/2+t.y),o.velocity.y=-i,m.push(o)}function D(){n>20&&(n-=20),(s+=1)%5==0&&Math.random()>.5&&function(){var t=new Z,i=Math.floor(Math.random()*h.width),o=-t.size,e=Math.random()*s+s/2,n=Math.floor(Math.random()*(e+15)+e)/2,a=Math.floor(Math.random()*(e+15)+e)/2;t.position.set(i,o);var r=Math.random();r>.5?N(t,e):r>.3?U(t,n,a,e):r>.1?X(t,n,a,e):W(t,n,a,e),m.push(t)}(),clearInterval(e),e=setInterval(Y,n)}function H(t,i){if(-1==t.indexOf("a"))return t.replace(")",","+i+")").replace("rgb","rgba")}function j(t){if("Enemy"==t.name){for(var i=Math.floor(6*Math.random()+3),o=0;o<i;o++){(s=new K).color=t.color,s.size=Math.floor(Math.random()*t.size/2+5);var e=Math.random()*t.size/2,n=Math.random()*t.size/2;s.position.x=t.position.x+e,s.position.y=t.position.y+n,m.push(s)}a+=25}else if("PowerUp"==t.name){for(i=Math.floor(6*Math.random()+3),o=0;o<i;o++){var s;(s=new K).color=$(100,255),s.size=Math.floor(Math.random()*t.size/2+5),e=Math.random()*t.size/2,n=Math.random()*t.size/2,s.position.x=t.position.x+e,s.position.y=t.position.y+n,m.push(s)}"scoreBoost"==(r=t.effect)?(console.log("+250"),y=1,g=!0,a+=250):"tripleShot"==r?(console.log("TRIPLE SHOT"),y=1,M=!0,w=!0,u=setInterval((function(){M=!1,clearInterval(u)}),1e4)):"bomb"==r&&(console.log("BOMB"),x=!0,y=1,m.forEach((function(t){"Enemy"==t.name&&j(t)})))}var r;A(t)}function A(t){v.push(t)}function Y(){var t=new V,i=Math.floor(Math.random()*h.width),o=-t.size,e=Math.random()*s+s/2,n=Math.floor(Math.random()*(e+15)+e),a=Math.floor(Math.random()*(e+15)+e);t.position.set(i,o);var r=Math.random();r>.5?N(t,e):r>.3?U(t,n,a,e):r>.1?X(t,n,a,e):W(t,n,a,e),m.push(t)}function N(t,i){t.update=function(t){this.velocity.x=0,this.velocity.y=i,G.prototype.update.call(this,t)}}function U(t,i,o,e){t.update=function(t){this.velocity.x=i*Math.cos(this.position.y/o),this.velocity.y=e,G.prototype.update.call(this,t)}}function W(t,i,o,e){var n=1;Math.random()>.5&&(n=-1),t.update=function(t){this.velocity.x=n*(-2*i/Math.PI)*Math.atan(1/Math.tan(this.position.y/o)),this.velocity.y=e,G.prototype.update.call(this,t)}}function X(t,i,o,e){t.update=function(t){this.velocity.x=2*i/Math.PI*Math.asin(Math.sin(this.position.y/o)),this.velocity.y=e,G.prototype.update.call(this,t)}}function $(t,i){return"rgb("+Math.floor(Math.random()*i+t)+","+Math.floor(Math.random()*i+t)+","+Math.floor(Math.random()*i+t)+")"}var q=function(t,i){this.x=t,this.y=i};q.prototype.set=function(t,i){this.x=t,this.y=i};var G=function(){this.name="Entity",this.size=25,this.position=new q(0,0),this.velocity=new q(0,0),this.color="#FFFFFF"};G.prototype.sayName=function(){console.log(this.name)},G.prototype.update=function(t){this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.position.x<0&&(this.position.x=this.size),this.position.x+this.size>h.width&&(this.position.x=h.width-this.size)},G.prototype.render=function(){l.fillStyle=this.color,l.fillRect(this.position.x,this.position.y,this.size,this.size)};var V=function(){G.call(this),this.name="Enemy",this.size=Math.floor(50*Math.random()+20),this.color=$(90,150)};V.prototype=Object.create(G.prototype),V.prototype.constructor=G;var J=function(){G.call(this),this.name="Player",this.color="#4747FF"};(J.prototype=Object.create(G.prototype)).constructor=G;var K=function(){G.call(this),this.name="Particle",this.size=10,this.time=0,this.maxTime=Math.floor(10*Math.random()+3),this.velocity.x=Math.floor(20*Math.random()-10),this.velocity.y=Math.floor(20*Math.random()-10)};K.prototype=Object.create(G.prototype),K.prototype.constructor=G,K.prototype.update=function(t){G.prototype.update.call(this,t),this.time+=t,this.time>=this.maxTime&&A(this)};var Q=function(){G.call(this),this.name="Bullet",this.size=10,this.time=0,this.color="rgba(200,200,200,1)",this.particlesDelay=.7};Q.prototype=Object.create(G.prototype),Q.prototype.constructor=G,Q.prototype.update=function(t){G.prototype.update.call(this,t);var i=this;if(m.forEach((function(t){var o,e,n,s,a,r,h,l,c,p,f,d;t!==i&&"Particle"!=t.name&&(e=t,n=(o=i).size,s=o.position.x,a=o.position.x+n,r=o.position.y,h=o.position.y+n,l=e.size,c=e.position.x,p=e.position.x+l,f=e.position.y,d=e.position.y+l,s<p&&a>c&&r<d&&h>f&&(j(t),A(i)))})),this.position.y<0&&A(this),this.time+=t,this.time>=this.particlesDelay){this.time=0;var o=new K;o.size=Math.floor(5*Math.random()+2),o.color=H("rgb(125,125,125)",Math.random()),o.velocity.x/=2,o.position.x=this.position.x+this.size/2-o.size/2,o.position.y=this.position.y-o.size/2,m.push(o)}};var Z=function(){G.call(this),this.name="PowerUp",this.size=20,this.time=0,this.particlesDelay=.25;var t=Math.random();this.effect=t<.5?"scoreBoost":t<.75?"tripleShot":"bomb"};Z.prototype=Object.create(G.prototype),Z.prototype.constructor=G,Z.prototype.update=function(t){if(G.prototype.update.call(this,t),(this.position.y<0||this.position.y+this.size>h.height)&&A(this),this.time+=t,this.time>=this.particlesDelay){this.time=0;var i=new K;i.size=Math.floor(5*Math.random()+2),i.color=H($(100,255),Math.random()),i.velocity.x/=2,i.position.x=this.position.x+this.size/2-i.size/2,i.position.y=this.position.y-i.size/2,m.push(i)}},Z.prototype.render=function(){l.fillStyle=$(100,255),l.fillRect(this.position.x,this.position.y,this.size,this.size)},document.addEventListener("DOMContentLoaded",T()),h.addEventListener("click",(function(){if(t)return tgames.gameStarted(),t=!1,O(),R(),(d=new J).position.set(h.width/2,h.height-d.size),d.render(),void m.push(d);C({x:0,y:-d.size},30),M&&(C({x:-d.size,y:-d.size},25),C({x:d.size,y:-d.size},25)),a>0&&(a-=1)})),window.addEventListener("resize",(function(){l.canvas.width=window.innerWidth,l.canvas.height=window.innerHeight-30,k()})),b.addEventListener("click",(()=>{0===p||p<0?(tgames.showRewardedAd(),p=3):p--,y>.5&&(T(),b.style.display="none")})),E.addEventListener("click",(async()=>{await tgames.showRewardedAd(),p--,I.style.display="none",f=!1,i=0,R(),k()})),S.addEventListener("click",(async()=>{I.style.display="none",z=!1,P()})),h.addEventListener("mousemove",(function(t){var i=function(t,i){var o=t.getBoundingClientRect();return new q(i.clientX-o.left,i.clientY-o.top)}(h,t);d&&!f&&(d.position.x=i.x)}),!1)})();
//# sourceMappingURL=bundle.a370a89402147c40.js.map